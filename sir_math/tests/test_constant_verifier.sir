// XTEST: sir-opt
// XTEST-OUTPUT-CHECK

module {

// CHECK-NOT: Error
function @const_i32() -> (i32) {
    %0 = math.constant 43: i32
    return %0: i32
}

function @const_f32() -> (f32) {
    %0 = math.constant 2.5: f32
    return %0: f32
}

// CHECK: Error: Required attribute `val` must be a scalar attribute, but got "foo" 
// CHECK-NEXT: %0 = "math.constant"() {"val" = "foo"} : () -> (f32)
function @fail_constant_str() -> (f32) {
    %0 = "math.constant"() {"val" = "foo"} : () -> (f32)
    return %0: f32
}

}